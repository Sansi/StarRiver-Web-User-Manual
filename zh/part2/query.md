# 查询模块

系统收集和记录了用户操作记录、设备历史数据、设备故障记录和传感器数据，可以随时进行查询。

## 查询用户操作记录

点击 `查询` - `操作记录`，设置好查询条件（`开始时间`、`结束时间`和`用户`，支持模糊查询）后点击 `查询`，右侧会显示查询结果，如下图所示。  ![查询操作记录](img/operation.png '查询操作记录')

## 查询设备的历史数据

点击 `查询` - `历史数据`，设置好查询条件（`开始时间`、`结束时间`、`类型` 与 `灯的名称`，支持模糊查询）后点击 `查询`，右侧会显示查询结果，**一次最多允许查询三个设备的数据**，如下图所示。  ![查询设备历史数据](img/history.png '查询设备历史数据')

## 查询设备的故障记录

点击 `查询` - `故障记录`，设置好查询条件（`开始时间`、`结束时间`、`类型` 与 `名称`，支持模糊查询）后点击 `查询`，右侧会显示查询结果，如下图所示。  ![查询设备故障记录](img/faliur.png '查询设备故障记录')

  > **说明**：数据库中设备故障信息记的是变化量，只有在变化时才记。因此会出现这种情况：
  >   假设某设备 20161201 异常，201601210 后正常，此时数据库中会有两条记录，分别是 
  >
  > * 20161201 异常 
  > * 20161210 正常
  >
  > 如果查询该设备在 20161202 - 20161205 的故障信息，在列表中会显示 “20161201 异常”。尽管 20161201 这个时间不在 20161202 -  20161205 的范围内。

## 查询传感器数据

### 实时与历史数据

查询智慧路灯中传感器的各项数据采集情况，操作步骤如下：

点击 `查询`- `传感器`，选中 `实时数据及历史`，在中间下拉菜单中选择一个智慧路灯后选中如 `温度` 就会显示此智慧路灯上面的传感器当前温度和历史温度，同时 `环境噪声`、`气压`、`风速`、`PM2.5` 和 `湿度` 同样，下方显示的表格横坐标代表时间，竖坐标代表温度值，如下图所示。![查询实时与历史数据](img/query_sensor_his.png '查询实时与历史数据')

### 当前检测数据预览

查询智慧路灯中传感器的当前采集数据数值，操作步骤如下：

点击 `查询` - `传感器`，选则某一智慧路灯后选中 `当前检测数据预览` 项，会显示该智慧路灯上面的传感器当前各项数值，如下图所示。  ![查询当前检测数据](img/query_sensor_cur_data.png '查询当前检测数据')


### 人流量/车流量的实时数据与历史

点击 `查询` - `传感器`，选中 `人流量`/`车流量` 项，在 `实时数据` 下拉菜单中选择一个传感器后下方会显示当前流量与历史数据表格，横坐标代表时间，竖坐标代表人/车数，人流量数据如下图所示。  ![查询人流量](img/query_sensor_human_traffic.png '查询人流量')
